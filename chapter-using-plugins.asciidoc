[[plugins]]
== Using Nexus Plugins

Nexus Open Source and Nexus Professional are built using a plugin
architecture, where Professional simply includes additional
plugins. Besides the default installed plugins you can install optional
plugins shipped with Nexus as well as plugins you or somebody else
created.
 
[[install-additional-plugins]]
=== Installing Additional Plugins


All plugins supplied by Sonatype are installed as part of the default
configuration and can be found in
+$NEXUS_HOME/nexus/WEB-INF/plugin-repository+.  Most plugins are
enabled by default. Some plugins are expose a capability as documented
in <<confignx-sect-capabilities>> and can therefore be enabled,
disabled and otherwise configured in the the capability
administration. The branding plugin or the outreach plugin are
examples of plugins exposing capabilities.

Prior to Nexus 2.7 optional plugins supplied by Sonatype can be found
in the directory +$NEXUS_HOME/nexus/WEB-INF/optional-plugins+. To
install any of these simply copy the folder containing the desired
plugin into +$NEXUS_HOME/nexus/WEB-INF/plugin-repository+.  When
updating Nexus you had to redo the install of any optinal plugins
using the newest version shipping with the download of the new Nexus
version. Any configuration of the plugin will be preserved from one
version to the other.

Plugins supplied by third parties or authored by yourself are
installed by copying the folder with the plugin code into
+sonatype-work/nexus/plugin-repository+.

After a restart of Nexus the new plugins will be active and ready
to use. Upgrades are done by simply copying over the newer plugin and
removing the older one.

Capability based plugins can be disabled in the capability
administration. Otherwise plugins can be removed by deleting the
respective folder in the plugin-repository and restarting Nexus.

[[nexus-outreach-plugin]]
=== Nexus Outreach Plugin

The Nexus Outreach Plugin is installed and enabled by default in Nexus Open Source
and Nexus Professional. It allocates space in the user
interface left navigation and welcome page for linking to further
documentation and support resources. This data is retrieved from Sonatype
servers.

In a case where this outgoing traffic from your Nexus instance or the
resulting documentation and links are not desired, the plugin can be
disabled. The plugin can be disabled by disabling the advanced
'Outreach : Management' capability in the Capabilities section found
in the Administration left hand navigation menu.

You can safely remove the plugin as well without any other negative side effects. To do so
simply remove the 'nexus-outreach-plugin-X.Y.Z' folder in
'$NEXUS_HOME/nexus/WEB-INF/plugin-repository/' and restart your Nexus
instance.

[[custom-metadata-plugin]]
=== Custom Metadata Plugin

The custom metadata plugin is an optional plugin that comes as part of
the Nexus Professional download. It allows you to view, edit and search for
additional metadata about any artifact in your Nexus repositories.

The directory containing the plugin code is called
nexus-custom-metadata-plugin-X.Y.Z. Install the plugin following the
instructions in <<install-additional-plugins>>.

==== Viewing Artifact Metadata

The Custom Metadata Plugin gives you the ability to view artifact
metadata. When browsing repository storage or a repository index,
clicking on an artifact will load the Artifact Information panel.
Selecting the Artifact Metadata tab will display the interface shown
in <<fig-using-viewing-metadata>>.

[[fig-using-viewing-metadata]]
.Viewing Artifact Metadata
image::figs/web/meta_existing-meta-value.png[scale=60]

Artifact metadata consists of a key, a value, and a namespace.
Existing metadata from an artifact's POM is given a urn:maven
namespace, and custom attributes are stored under the urn:nexus/user
namespace.

==== Editing Artifact Metadata

The Custom Metadata Plugin gives you the ability to add custom
attributes to artifact metadata. To add a custom attribute, click on
an artifact in Nexus, and select the Artifact Metadata tab. On the
Artifact Metadata tab, click on the Add... button and a new row will
be inserted into the list of attributes. Supply a key and value and
click the Save button to update an artifact's
metadata. <<fig-using-editing-metadata>> shows the Artifact Metadata
panel with two custom attributes: "approvedBy" and "approved".

[[fig-using-editing-metadata]]
.Editing Artifact Metadata
image::figs/web/meta_setting-meta-value.png[scale=60]

==== Searching Artifact Metadata

The Custom Metadata Plugin provides you with the ability to configure
custom artifact metadata and search for artifacts with specific
metadata. To search for artifacts using metadata, click on the
Advanced Search link directly below the search field in the Nexus
application menu to open the Search panel. Once in the search panel,
click on the Keyword Search and click on Metadata Search in the search
type drop-down as shown in <<fig-using-search-metadata>>.

[[fig-using-search-metadata]]
.Searching Artifact Metadata
image::figs/web/meta_search-selection.png[scale=60]

Once you select the Metadata Search you will see two search fields and
an operator drop-down. The two search fields are the key and value of
the metadata you are searching for. The key corresponds to the key of
the metadata you are searching for, and the value contains the value
or value range you are searching for. The operator drop-down can be set
to Equals, Matches, Bounded, or Not Equal.

.Metadata Search Results for Custom Metadata
image::figs/web/meta_search-function.png[scale=60]

Once you locate a matching artifact in the Metadata Search interface,
click on the artifact and then select the Artifact Metadata to examine
an artifacts metadata as shown in <<fig-using-search-metadata-results>>.

[[fig-using-search-metadata-results]]
.Metadata Search Results for Custom Metadata
image::figs/web/meta_search-result-0.png[scale=60]


[[user-account]]
=== User Account Plugin

Nexus Professional's User Account Plugin allows anonymous users to
sign-up for a Nexus account without administrative intervention.  This
"self-serve" capability for user account creation is especially
important when an open source project is using Nexus as a primary
means for distribution. In such an environment, there may be hundreds
of Nexus users who all need a basic level of read-only access, and
making these users wait for an administrator to create an account
makes little sense. In such a setting, anyone can create an account,
activate the account via a verification email, and then access a
repository with a default level of access you can
define.

[[user-account-sect-installation]]
==== Installing the User Account Plugin

The user account plugin is an optional plugin that comes as part of the
Nexus Professional download. The directory containing the plugin code is called
nexus-user-account-plugin-X.Y.Z. Install the plugin following the
instructions in <<install-additional-plugins>>.
 
[[user-account-sect-configuring]]
==== Configuring the User Account Plugin

After a restart of Nexus the installed plugin will be available for
use but still be deactivated.  To configure the User Account Plugin,
click on Server under the Administration section of the Nexus menu,
and scroll down to the section named "User Sign Up". The User Sign Up
section is shown in <<fig-user-account-user-sign-up-preference>>.

[[fig-user-account-user-sign-up-preference]]
.Configuring the User Account Plugin
image::figs/web/user-account_user-sign-up-preference.png[scale=60]

To activate the User Sign Up feature, set the "User Sign Up" feature
to "On". This will expose a "Sign Up" link next to the "Log In" link
in the Nexus user interface. The Selected Roles in this configuration
section are the default roles assigned to users who successfully
signed up for an account.

In addition it is necessary for the anonymous user to have the role
"UI: User Account Sign Up" assigned. This should be automatically
configured during the plugin install. You can use the Role Tree tab for
the anonymous user to inspect if that is correctly configured, and if
necessary add the role

[[user-account-sect-sign-up]]
==== Signing Up for an Account

Once User Sign Up has been activated via the Server settings as shown
in <<user-account-sect-configuring>>, users will see a Sign Up link
next to the Log In link in the top right hand corner of the Nexus
interface. Clicking on this Sign Up link will display the Nexus Sign
Up dialog shown in <<fig-user-account-sign-up-form>>. This form
accepts a username, password, the first and last name of the new user,
and an email account. It also asks the users to type in some text from
a captcha form element. If a user cannot read the text in the captcha,
they can click on the captcha to refresh it with new text.

[[fig-user-account-sign-up-form]]
.Nexus Sign Up Form
image::figs/web/user-account_sign-up-form.png[scale=60]

Once the new user clicks on the Sign Up button, they will receive a
confirmation dialog which instructs them to check for an activation
email.

[[fig-user-account-sign-up-confirm]]
.Nexus Sign Up Confirmation
image::figs/web/user-account_sign-up-succeed.png[scale=60]

The user will then receive an email containing an activation
link. 

WARNING: The SMTP settings in your Nexus Server configuration need to
be set up for the activation email to be sent successfully.

When a user signs up for a Nexus account, the newly created
account is disabled until they click on the activation link contained
in this email. A sample of the activation email is shown in <<fig-user-account-activation-email>>.

[[fig-user-account-activation-email]]
.Nexus Activation Email
image::figs/web/user-account_activation-email.png[scale=50]

Upon successful login from the activation email link, the user will be
directed to the Summary panel of the users Profile.

NOTE: The example activation email in <<fig-user-account-activation-email>>, points to
localhost:8081. You can change this URL by changing the Base URL
setting in the Application Server Settings section of the Server
configuration.  To change this setting, click on the Server link under
Administration in the Nexus menu.

[[user-account-sect-manual-activate]]
==== Manual Activation of New Users

If a user does not receive the activation email after signing up for a
new account, an Administrator may need to manually activate a new
user. To do this, go to the list of Nexus users by clicking on the
Users link under Security in the Nexus menu. Locate and select the new
user in the list of Nexus users, and change the Status from Disabled
to Enabled as shown in <<fig-user-account-activation>>.

[[fig-user-account-activation]]
.Manually Activating a Signed Up User
image::figs/web/user-account_sign-up-admin-activate.png[scale=60]

[[user-account-sect-default-user]]
==== Modifying Default User Permissions

The default user permissions in the User Sign Up feature only includes
"UI: Base UI Privileges". If a user signs up with just this simple
permission, the only thing they will be able to do is login, change
their password, and logout. <<fig-user-account-base-ui>>, shows the
interface a user would see after logging in with only the base UI
privileges.

[[fig-user-account-base-ui]]
.User Interface with only the Base UI Privileges
image::figs/web/user-account_sign-up-default-permissions.png[scale=20]

To provide some sensible default permissions, click on the Server
under the Administration section of the Nexus menu and scroll down to
the User Sign Up section of the Server settings. Make sure that the
selected default roles for new users contain some ability to browse,
search, and view repositories.

[[fig-user-account-default-roles]]
.Selecting Default Roles for New Users
image::figs/web/user-account_sign-up-more-default-permissions.png[scale=60]

WARNING: <<fig-user-account-default-roles>> shows a
default User Sign Up role containing the Nexus Deployment Role. If
your server were available to the public this wouldn't be a wise
default role as it would allow anyone to sign up for an account,
activate an account, and start publishing artifacts to hosted
repositories with little or no oversight. Such a default role may only
make sense if you are running an internal, corporate instance of Nexus
Professional and you are comfortable granting any developer in the
organization deployment permissions.

[[nexus-branding-plugin]]
=== Nexus Branding Plugin

The branding plugin is an optional plugin that comes as part of Nexus
Professional. It features the possibility to brand your Nexus instance
by replacing the default Sonatype Nexus logo with your logo (or an
image of your choice).

The new logo needs to be a PNG image. To blend in well in the UI, it
is recommended that it is of 60 pixels height and has a transparent
background.

By default, the branding plugin will look for the new logo in a file
called 

----
sonatype-work/nexus/conf/branding.png
-----

However, it is possible to configure this path by adding a
branding.image.path property to the 'nexus.properties' file in 
'$NEXUS_HOME/conf/':

----
branding.image.path=/data/images/nexus_logo.png
----

If it fails to find a new logo, the plugin will fall back to using
the default Sonatype Nexus logo.

////
/* Local Variables: */
/* ispell-personal-dictionary: "ispell.dict" */
/* End:             */
////
